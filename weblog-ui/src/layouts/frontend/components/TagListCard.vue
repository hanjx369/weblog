<script setup>
import { getTagList } from '@/api/frontend/tag'
import { ref } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()

// 所有标签
const tags = ref([])
getTagList().then((res) => {
  if (res.success) {
    tags.value = res.data
  }
})

// 跳转标签文章列表页
const goTagArticleListPage = (id, name) => {
  // 跳转时通过 query 携带参数（标签 ID、标签名称）
  router.push({ path: '/tag/article/list', query: { id, name } })
}
</script>

<template>
  <div
    v-if="tags.length > 0"
    class="w-full p-5 mb-3 bg-white border border-gray-200 rounded-lg dark:bg-gray-800 dark:border-gray-700"
  >
    <!-- 标签标题 -->
    <h2 class="flex items-center text-lg font-semibold text-gray-900 dark:text-white">
      <svg
        t="1703594649100"
        class="icon w-5 h-5 mr-2"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="8432"
        width="200"
        height="200"
      >
        <path
          d="M42.821818 582.888727l364.264727 365.428364 413.463273-414.952727-32.302545-332.846546-332.008728-32.581818z"
          fill="#00FFB0"
          p-id="8433"
        ></path>
        <path d="M788.247273 200.424727v0.186182h0.186182z" fill="#00FFB0" p-id="8434"></path>
        <path
          d="M778.100364 18.245818c-52.596364 0-102.027636 20.526545-139.217455 57.809455-19.083636 19.176727-33.652364 41.890909-43.473454 66.699636l-135.214546-13.218909a40.215273 40.215273 0 0 0-32.674909 11.729455L14.056727 556.171636a40.541091 40.541091 0 0 0 0 57.250909l364.357818 365.381819a40.494545 40.494545 0 0 0 57.390546 0l413.463273-414.952728a40.494545 40.494545 0 0 0 11.636363-32.535272l-12.8-131.723637a195.863273 195.863273 0 0 0 69.026909-44.776727 197.678545 197.678545 0 0 0 0-278.807273A195.118545 195.118545 0 0 0 778.146909 18.245818z m-370.967273 874.589091l-307.153455-308.037818 371.432728-372.782546 279.738181 27.461819 8.750546 90.344727a114.641455 114.641455 0 0 1-63.627636-32.209455 40.494545 40.494545 0 1 0-57.390546 57.250909 194.978909 194.978909 0 0 0 129.024 57.25091l10.472727 108.078545-371.293091 372.596364zM859.694545 297.565091a115.525818 115.525818 0 0 1-20.014545 15.825454l-10.845091-111.988363a40.494545 40.494545 0 0 0-11.869091-27.694546 40.401455 40.401455 0 0 0-27.787636-12.008727L681.890909 151.272727c4.235636-6.376727 8.843636-12.520727 14.336-18.013091a114.781091 114.781091 0 0 1 81.780364-33.978181c30.859636 0 59.904 12.101818 81.733818 33.978181a116.456727 116.456727 0 0 1 0 164.352z"
          fill="#000A64"
          p-id="8435"
        ></path>
        <path
          d="M443.205818 655.36l-37.701818 37.794909-38.958545-39.144727a40.494545 40.494545 0 1 0-57.390546 57.204363l67.677091 67.956364 0.139636 0.046546c1.536 1.536 3.211636 2.792727 4.887273 4.002909l1.396364 1.117091c1.629091 1.117091 3.444364 1.908364 5.166545 2.792727 0.651636 0.279273 1.256727 0.698182 1.861818 0.930909a39.098182 39.098182 0 0 0 5.632 1.722182c0.651636 0.139636 1.256727 0.418909 1.861819 0.512a41.425455 41.425455 0 0 0 15.499636 0c0.465455-0.046545 0.930909-0.279273 1.396364-0.372364a41.518545 41.518545 0 0 0 6.144-1.861818c0.930909-0.372364 1.768727-0.930909 2.699636-1.396364 1.442909-0.744727 2.932364-1.396364 4.328727-2.327272 1.442909-0.930909 2.792727-2.187636 4.142546-3.351273 0.698182-0.605091 1.489455-1.070545 2.141091-1.768727l0.139636-0.046546 66.327273-66.56a40.494545 40.494545 0 0 0-57.390546-57.250909z"
          fill="#000A64"
          p-id="8436"
        ></path>
      </svg>
      标签
    </h2>
    <!-- 标签列表 -->
    <span
      v-for="(tag, index) in tags"
      :key="index"
      @click="goTagArticleListPage(tag.id, tag.name)"
      class="inline-block mb-1 cursor-pointer bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded hover:bg-green-200 hover:text-green-900 dark:bg-green-900 dark:text-green-300"
    >
      {{ tag.name }}
    </span>
  </div>
</template>
